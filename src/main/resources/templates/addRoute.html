<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>STENOGRAFFIA</title>
    <link rel="stylesheet" href="https://bootswatch.com/5/darkly/bootstrap.min.css">
    <script src="https://cdn.jsdelivr.net/npm/bootswatch@5.1.3/dist/darkly/bootstrap.min.css"></script>
    <script src=https://code.jquery.com/jquery-3.6.0.min.js></script>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=default"></script>
<!--    <script src="/static/addRoute.js" type="module"></script>-->
    <script>
let map;

function initMap() {
  const directionsService = new google.maps.DirectionsService();
  const directionsRenderer = new google.maps.DirectionsRenderer();
  map = new google.maps.Map(document.getElementById("map"), {
    zoom: 6,
    center: { lat: 37.7699298, lng: -122.4469157 },
  });

  directionsRenderer.setMap(map);
  var btn = document.getElementById("Submit")
  btn.onclick = function(){
    calculateAndDisplayRoute(directionsService, directionsRenderer);
    };
}

function calculateAndDisplayRoute(directionsService, directionsRenderer) {
  var haight = new google.maps.LatLng(37.7699298, -122.4469157);
  var oceanBeach = new google.maps.LatLng(37.7683909618184, -122.51089453697205);
  const waypts = [];


  waypts.push({
    location: { lat: 41.85, lng: -87.65 },
    stopover: true,
  });

  directionsService
    .route({
      origin: haight,
      destination: oceanBeach,
      waypoints: waypts,
      optimizeWaypoints: true,
      travelMode: google.maps.TravelMode.DRIVING,
    })
    .then((response) => {
      directionsRenderer.setDirections(response);
    })
    .catch((e) => window.alert("Directions request failed due to " + status));
}
    </script>
</head>
<body>
<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
    <div class="container-fluid">
        <a class="navbar-brand" href="/">STENOGRAFFIA Admin</a>

        <div class="collapse navbar-collapse" id="navbarColor02">
            <ul class="navbar-nav me-auto">
                <li class="nav-item">
                    <a class="nav-link" href="/addPlace">Add Place</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link active" href="/addRoute">Add route</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/surfaceExchange">Surface exchange</a>
                </li>
            </ul>
        </div>
    </div>
</nav>
<h2>Add route</h2>
</div>
<div id="map" style="height:400px"></div>
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAIYgp4_fQM9IN3P5GI2a_s2vxNz4ysrjQ&callback=initMap"
        async></script>
<button type="button" class="btn btn-primary" name="Submit" id="Submit">Submit</button>
</body>
</html>